
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../standard-library/">
      
      
        <link rel="next" href="../0001-error-handling/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.19">
    
    
      
        <title>WU0000: Design - jinko docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wu0000-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="jinko docs" class="md-header__button md-logo" aria-label="jinko docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            jinko docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WU0000: Design
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jinko-core/jinko" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="jinko docs" class="md-nav__button md-logo" aria-label="jinko docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    jinko docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jinko-core/jinko" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jinko programming documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Language
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The jinko programming language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Types
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/types/0_builtin_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Built-in types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/types/1_custom_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom types in jinko
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/types/2_contract/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type obligations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../language/types/multi_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Standard library
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Standard library
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standard-library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Writeups
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Writeups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    WU0000: Design
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    WU0000: Design
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stmts-and-exprs" class="md-nav__link">
    <span class="md-ellipsis">
      Stmts and Exprs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Unit tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choosing-between-func-and-fn" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing between func and fn
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-instruction-struct" class="md-nav__link">
    <span class="md-ellipsis">
      The Instruction struct
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-other-source-files" class="md-nav__link">
    <span class="md-ellipsis">
      Importing other source files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#garbage-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Garbage collection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ffi" class="md-nav__link">
    <span class="md-ellipsis">
      FFI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nullable-types" class="md-nav__link">
    <span class="md-ellipsis">
      Nullable types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      The interpreter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-types" class="md-nav__link">
    <span class="md-ellipsis">
      Structure Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-type-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Simple type parsing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simple type parsing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods-and-functions-in-jinko" class="md-nav__link">
    <span class="md-ellipsis">
      Methods and functions in Jinko
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-cost-custom-types" class="md-nav__link">
    <span class="md-ellipsis">
      No-cost custom types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generics" class="md-nav__link">
    <span class="md-ellipsis">
      Generics
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0001-error-handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0001: Error handling in jinko
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0002-generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0002: Canonicalization and generics in jinko
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0003-multi-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0003: Sum types in jinko
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0004-error-handling-inside-the-interpreter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0004: Error handling inside jinko's interpreter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0007-partial-application-op/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0007: Partial Application operator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0008-specialization-partial-generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0008: Specialization, generic application, partial generic application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0009-closures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0009: Closures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0009-modules-as-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0009: Modules as types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0010-first-class-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0010: First class types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0011-shell-abstractions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0011: Shell abstraction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0012-default-field-access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0012: Default field accesses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0013-kind-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0013: Kind system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0014-type-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0014: Type system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../0015-ufcs-and-function-calls-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WU0015: UFCS and function resolution rules
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stmts-and-exprs" class="md-nav__link">
    <span class="md-ellipsis">
      Stmts and Exprs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Unit tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#choosing-between-func-and-fn" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing between func and fn
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-instruction-struct" class="md-nav__link">
    <span class="md-ellipsis">
      The Instruction struct
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-other-source-files" class="md-nav__link">
    <span class="md-ellipsis">
      Importing other source files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#garbage-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Garbage collection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ffi" class="md-nav__link">
    <span class="md-ellipsis">
      FFI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nullable-types" class="md-nav__link">
    <span class="md-ellipsis">
      Nullable types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      The interpreter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-types" class="md-nav__link">
    <span class="md-ellipsis">
      Structure Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structure Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-type-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Simple type parsing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simple type parsing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods-and-functions-in-jinko" class="md-nav__link">
    <span class="md-ellipsis">
      Methods and functions in Jinko
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-cost-custom-types" class="md-nav__link">
    <span class="md-ellipsis">
      No-cost custom types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generics" class="md-nav__link">
    <span class="md-ellipsis">
      Generics
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="wu0000-design">WU0000: Design</h1>
<p>This document describes some of the choices made when developing jinko, as well as some implementation choices</p>
<h2 id="stmts-and-exprs">Stmts and Exprs</h2>
<p>There are two types of instructions in jinko: Those returning the equivalent of <code>void</code>,
or <code>{}</code>, such as a variable assignation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// Returns &quot;void&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">func</span><span class="w"> </span><span class="n">void_func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Returns nothing</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">}</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">void_func</span><span class="p">();</span><span class="w"> </span><span class="c1">// Thus a statement as well</span>
</code></pre></div>
<p>And those returning any other type, which must not be ignored. For example, constant
expressions or non-void function calls:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">func</span><span class="w"> </span><span class="n">return_x</span><span class="p">(</span><span class="n">int</span>: <span class="nc">x</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="c1">// Returns an integer. Notice the lack of semicolon</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="p">}</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">func</span><span class="w"> </span><span class="n">return_func</span><span class="p">(</span><span class="n">int</span>: <span class="nc">x</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">func</span><span class="p">(</span><span class="n">int</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="n">lambda</span><span class="p">(</span><span class="n">int</span>: <span class="nc">x</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="n">l</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="p">}</span><span class="w"> </span><span class="c1">// This returns a lambda taking an int as argument and returning an int</span>
</code></pre></div>
<p>Statements are void, while Expressions return something. You cannot ignore a non-void
return value.</p>
<h2 id="unit-tests">Unit tests</h2>
<p>Embedding unit testing in a language relies on using an "attribute-like" syntax. For
example, in Java you can do the following by using a library, JUnit, which itself uses
attributes (@ syntax).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nd">@Test</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">something_something_factory_bean_sprout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">something</span><span class="p">(),</span><span class="w"> </span><span class="n">something_else</span><span class="p">());</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">}</span>
</code></pre></div>
<p>In rust, attributes (or tags) use the #[syntax]. Unit tests are embedded directly into
the language without the need for external libraries.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">#[test]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">fn</span> <span class="nf">something_in_rust</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">something</span><span class="p">(),</span><span class="w"> </span><span class="n">something_else</span><span class="p">());</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="p">}</span>
</code></pre></div>
<p>In jinko, test functions require no attribute (not that it's any better than using
an attribute, it's just simpler for the interpreter).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">test</span><span class="w"> </span><span class="n">something_but_in_jinko</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="n">assert_eq</span><span class="p">(</span><span class="n">something</span><span class="p">(),</span><span class="w"> </span><span class="n">something_else</span><span class="p">());</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="p">}</span>
</code></pre></div>
<p>Mocking is done similarly, by using the <code>mock</code> keyword</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/* This will mock the function something() */</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">mock</span><span class="w"> </span><span class="n">something</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="cm">/* Mocking */</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="p">}</span>
</code></pre></div>
<h2 id="choosing-between-func-and-fn">Choosing between func and fn</h2>
<p>jinko uses three keywords to define "functions":
* <code>test</code> which are unit tests
* <code>mock</code> which are function mocks
* <code>func</code> which is for functions and procedures</p>
<p>(Procedures return <code>Nothing</code>, while Functions return <code>Something</code>)</p>
<p><code>func</code> was chosen over <code>fn</code> because this way, it looks pretty when next to a <code>test</code> or
a <code>mock</code> :)</p>
<h2 id="the-instruction-struct">The <code>Instruction</code> struct</h2>
<p>Instructions are a central part of Jinko. A jinko program is composed of
instructions and functions, which themselves are instructions.
Instructions can be either Statements or Expressions</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// Stmt</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">x</span><span class="w"> </span><span class="c1">// Expr</span>
</code></pre></div>
-&gt; This jinko code simply assigns a variable x and returns it. If you execute it, the
exit-code will be the value assigned to <code>x</code>. In that case, 12</p>
<p>An instruction needs to contain "spacial" information (Where is it in the file ? In what
file ?), source (the actual source code, for errors), and a Statement or an Expression
to execute.</p>
<h2 id="importing-other-source-files">Importing other source files</h2>
<p>Since jinko scripts are simple scripts a la Python, where there is no main functions,
importing simply works by "copy/pasting" other source files. There is no distinction
between headers and source files, so it's a bit different from C's preprocessor for
example. However, the syntax is similar</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">incl</span><span class="w"> </span><span class="n">other_script</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="cm">/* Functions, Variables in other_script are imported. They&#39;re now named</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="cm">other_script::&lt;function_name&gt;, other_script::&lt;var_name&gt; and so on */</span>
</code></pre></div>
<p>There is no way to remove the usage of <code>&lt;source_name&gt;::</code>. This is the cause of some
programming issues in C++, C# and other languages with similar features.</p>
<p>You can only import an external source once per program. This way, no circular
dependencies are created.</p>
<p>To separate sources with the same name, for example from multiple directories, you
can use the <code>as</code> syntax</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Wrong</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">incl</span><span class="w"> </span><span class="n">dir0</span>::<span class="n">source0</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">incl</span><span class="w"> </span><span class="n">dir1</span>::<span class="n">source0</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="cm">/* Both sources would have the same name. This is an error */</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="c1">// Good</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="n">incl</span><span class="w"> </span><span class="n">dir0</span>::<span class="n">source0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dir0_source0</span><span class="p">;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="n">incl</span><span class="w"> </span><span class="n">dir1</span>::<span class="n">source0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dir1_source0</span><span class="p">;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="cm">/* Now, dir0::source0 functions are named dir0_source0::&lt;function_name&gt; and so on */</span>
</code></pre></div>
<p>For now, you can also include directories:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>/*
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">|</span>_<span class="w"> </span>main.jk
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">|</span>_<span class="w"> </span>std/
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="p">|</span>_<span class="w"> </span>lib.jk<span class="w">       </span>//<span class="w"> </span>includes<span class="w"> </span>option.jk,<span class="w"> </span>result.jk<span class="w"> </span>maybe,<span class="w"> </span>etc
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="p">|</span>_<span class="w"> </span>option.jk
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="p">|</span>_<span class="w"> </span>result.jk
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>*/
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="sb">```</span>rust
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>incl<span class="w"> </span>std<span class="w"> </span>//<span class="w"> </span>Actually<span class="w"> </span>includes<span class="w"> </span>std/lib.jk
</code></pre></div>
<p>I'm not entirely happy with this design yet. It's obviously open to discussion and changes.</p>
<h2 id="garbage-collection">Garbage collection</h2>
<p>Memory allocation and collection is done via reference counting. This implies lower stress
on the hardware used to run the program, and is easier to implement, thus keeping
jinko simpler. However, this causes issues when an instance references itself, thus
creating memory leaks.</p>
<h2 id="ffi">FFI</h2>
<p>The idea is to mark functions from external shared libraries with the <code>ext</code> keyword.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">ext</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">lhs</span>: <span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="n">rhs</span>: <span class="nc">int</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">int</span><span class="p">;</span><span class="w"> </span><span class="c1">// This function isn&#39;t defined in jinko</span>
</code></pre></div>
<p>Calling <code>add()</code> will actually make a call into a native-code function, for example one
written in Rust, C or C++. Adjustments need to be done on the native side of things in
order to allow name resolution</p>
<h2 id="nullable-types">Nullable types</h2>
<p>In Rust, types are not nullable. There is no way (in the safe subset of the language
at least) to return <code>NULL</code> as a value. However, the <code>Option</code> type exists: You can either
return <code>Some(value)</code> or <code>None</code> in case something went wrong. You also have to handle both
cases when using those Option types. In languages such as Zig (I think) or Dart (soon),
some types can be "nullable". By annotating the type with a question mark, you can
indicate that the value might be null. For example, <code>String</code> needs to be a valid string,
but <code>String?</code> can be a valid string or NULL. These two approaches do not exactly serve
the same purpose. However, they are useful when it comes to error handling, as well as
the possibility of not having something. In C, you are constrained to use NULL. Every
pointer is "nullable", and therefore you always have to check for NULL. In Dart and Zig,
you only have to check for NULL if the type is nullable. In Rust, you have to check
your option types or <code>unwrap()</code> on them, which will cause a panic in case of a <code>None</code>
(a bit equivalent to segfaulting on NULL, but less sneaky and way less vulnerable).</p>
<p>While these two approaches both have advantages and inconvenient, the Rust approach is,
in my opinion for Jinko, significantly better for a simple reason: Even if Options are
part of the standard library and "included" by default, they do not rely on some obscure
compiler magic: They are just a type. Therefore, they are being understood by the compiler
as just a type. And I think that keeping <code>jinko</code> simple also means keeping the interpreter
simple. Therefore, I think that simply using <code>Option</code>s (or some other nomenclature) would
be best.</p>
<h2 id="the-interpreter">The interpreter</h2>
<p>The jinko interpreter should keep track of variables and functions. Therefore, at
least two hashmaps are required, one for variables and one for functions. Each of these
elements need to have a unique name to identify them.</p>
<h2 id="structure-types">Structure Types</h2>
<p>Allowing user defined types makes for cleaner as well as stricter code. One thing that
jinko really has to focus about is "zero-cost types", as in custom types that englobe
a single, other type without penalty. In the mean time, the interpreter should also focus
on simple parsing and fonctionality. Let's split this section in two:</p>
<h3 id="simple-type-parsing">Simple type parsing</h3>
<p>In order to keep the parsing simple, as much code as possible should be reused. At this
point, the parser is already around 1500 lines big, and that's big enough. Types
declarations are similar to function declarations: They have a name, take arguments.
Type instantiations, however are quite different. Let's examine a custom types in C and its
instantiation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">custom_type</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">int_value</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">some_character</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">};</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="c1">// And to initialize it, one way is to do the following</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">custom_type</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">.</span><span class="n">int_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="kt">char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;J&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="kt">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">27.07</span><span class="p">};</span>
</code></pre></div>
<p>This is similar to creating and calling a function, only that the syntax differs. I
believe jinko could keep the same syntax for both custom types and custom functions, as
they aim to achieve the same "kind" of result: A custom, user-made behavior that produces
cleaner and more readable code.</p>
<p>Thus, the following syntax should be adopted at first:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">// This is similar to a function declaration, without a block and with a ``type`` instead of ``fn``</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">type</span> <span class="nc">CustomType</span><span class="p">(</span><span class="n">int_value</span>: <span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="n">some_character</span>: <span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">f</span>: <span class="nc">float</span><span class="p">);</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="c1">// Let&#39;s create one</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CustomType</span><span class="p">(</span><span class="n">int_value</span>: <span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">some_character</span>: <span class="o">&#39;</span><span class="na">J</span><span class="o">&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">f</span>: <span class="mf">27.07</span><span class="p">);</span>
</code></pre></div>
<p>If your types get too big, then just like function definitions, multilines are supported.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">type</span> <span class="nc">CustomType</span><span class="p">(</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="n">int_value</span>: <span class="nc">int</span><span class="p">,</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="n">some_character</span>: <span class="kt">char</span><span class="p">,</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="n">f</span>: <span class="nc">float</span><span class="p">,</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">);</span>
</code></pre></div>
<p>The only difference between a function definition and a type definition is the keyword:
<code>type</code> or <code>func</code> and no block of code for the type instantiation.</p>
<p>Type instantiations use the <code>:</code> token to associate a value with a field, while function
calls do not use any token. For optional/named arguments, function calls use the <code>=</code>
token</p>
<h4 id="methods-and-functions-in-jinko">Methods and functions in Jinko</h4>
<p>Let's say you define your custom type in C. If you do "object oriented C", you'll probably
end up with the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cm">/* Simple linked list node */</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="p">};</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="cm">/* Create a new node */</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">ll_new</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">);</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="cm">/* Destroy a previously created node */</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ll_del</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">head</span><span class="p">);</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="cm">/* Get the next node */</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">ll_next</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">node</span><span class="p">);</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="cm">/* Get the value from the node */</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="kt">int</span><span class="w"> </span><span class="nf">ll_value</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">node</span><span class="p">);</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="cm">/* Push some node to the list */</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ll_push</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">node</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">);</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="cm">/* Implementation is not important */</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">    </span><span class="c1">// Create our head</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ll_new</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ll_new</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">);</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ll_new</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">mid</span><span class="p">);</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ll</span><span class="w"> </span><span class="o">*</span><span class="n">rand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ll_new</span><span class="p">(</span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="w">    </span><span class="n">ll_push</span><span class="p">(</span><span class="n">head</span><span class="p">,</span><span class="w"> </span><span class="n">rand</span><span class="p">);</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">    </span><span class="c1">// Make sure the positions and values are correct</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">ll_value</span><span class="p">(</span><span class="n">ll_next</span><span class="p">(</span><span class="n">head</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">    </span><span class="c1">// We&#39;re done with the list</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">    </span><span class="n">ll_del</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="p">}</span>
</code></pre></div>
<p>The "object oriented" approach does not really work in C, and is cumbersome. Compare it
to any actual OOP language, where we could do <code>head.del()</code>, or <code>head.next().value()</code>.</p>
<p>However, the object oriented approach brings in a lot of complexity, too much for jinko.
A struct model, in a C way should be prefered. But that doesn't mean we can't add
some syntactic sugar to it.</p>
<p>Let's consider a custom type with its "methods" and a simple function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// There&#39;s already a &quot;default constructor&quot;, so we don&#39;t need to define new(). Also, there</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="c1">// is no NULL in jinko</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">type</span> <span class="nc">LinkedList</span><span class="p">(</span><span class="n">value</span>: <span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="n">next</span>: <span class="nb">Option</span><span class="o">&lt;</span><span class="n">LinkedList</span><span class="o">&gt;</span><span class="p">);</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">func</span><span class="w"> </span><span class="n">del</span><span class="p">(</span><span class="n">head</span>: <span class="nc">LinkedList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="cm">/* Walk the whole list, deleting stuff as it comes */</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">}</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">func</span><span class="w"> </span><span class="n">value</span><span class="p">(</span><span class="n">node</span>: <span class="nc">LinkedList</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">int</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="n">node</span><span class="p">.</span><span class="n">value</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="p">}</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="n">func</span><span class="w"> </span><span class="n">next</span><span class="p">(</span><span class="n">node</span>: <span class="nc">LinkedList</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">LinkedList</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">    </span><span class="n">node</span><span class="p">.</span><span class="n">next</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="p">}</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="n">func</span><span class="w"> </span><span class="n">push</span><span class="p">(</span><span class="n">node</span>: <span class="nc">LinkedList</span><span class="p">,</span><span class="w"> </span><span class="n">next</span>: <span class="nc">LinkedList</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">    </span><span class="cm">/* Some code to add next to the end of the list or whatever */</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="p">}</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LinkedList</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">);</span>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LinkedList</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">last</span><span class="p">));</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LinkedList</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">mid</span><span class="p">));</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="n">head</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">LinkedList</span><span class="p">(</span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">));</span>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="cm">/* Or ... */</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="n">push</span><span class="p">(</span><span class="n">head</span><span class="p">,</span><span class="w"> </span><span class="n">LinkedList</span><span class="p">(</span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">));</span>
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="n">assert_eq</span><span class="p">(</span><span class="n">head</span><span class="p">.</span><span class="n">next</span><span class="p">().</span><span class="n">value</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="cm">/* Or ... */</span>
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="n">assert_eq</span><span class="p">(</span><span class="n">value</span><span class="p">(</span><span class="n">next</span><span class="p">(</span><span class="n">head</span><span class="p">)),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a><span class="cm">/* We&#39;re done with the list */</span>
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="n">head</span><span class="p">.</span><span class="n">del</span><span class="p">();</span>
</code></pre></div>
<p>Both calling methods are valid. In the end, to keep things simple, the first argument
will always act similarly to <code>self</code> in Rust, or <code>this</code> in most OOP languages. This also
means that the following is possible</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">func</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">a</span>: <span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="n">b</span>: <span class="nc">int</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="p">}</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="mf">12.</span><span class="n">add</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">add</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">);</span>
</code></pre></div>
<p>So the concept of methods doesn't really exist in Jinko. The calling method is just
syntactic sugar over regular function calling.</p>
<h3 id="no-cost-custom-types">No-cost custom types</h3>
<p>Let's say you're using an API, and using some complex custom made function. For example,
<code>add_friend</code>, which takes a last name, a first name, and a nickname. Let's say you're not
using an IDE or a language server: You remember the function name, but not the order of
the arguments: Is it <code>add_friend(first_name, name, nickname)</code>?
<code>add_friend(nickname, first_name, name)</code>?
If the API was designed by a japanese coder, maybe it's <code>add_friend(name, first_name, nickname)</code>?</p>
<p>There is no way to know without checking the documentation. Now, this is good, since it
forces you to check the documentation. But we can also enforce type safety and data safety
through the interpreter.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// The friend type, that already existed</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">type</span> <span class="nc">Friend</span><span class="p">(</span><span class="cm">/* Some values */</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1">// Define three &quot;custom&quot; types</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="k">type</span> <span class="nc">Name</span><span class="p">(</span><span class="n">the_name</span>: <span class="kt">str</span><span class="p">);</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">type</span> <span class="nc">FirstName</span><span class="p">(</span><span class="n">value</span>: <span class="kt">str</span><span class="p">);</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="k">type</span> <span class="nc">Nickname</span><span class="p">(</span><span class="n">hidden</span>: <span class="kt">str</span><span class="p">);</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="c1">// And define the API function like so:</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="n">func</span><span class="w"> </span><span class="n">add_friend</span><span class="p">(</span><span class="n">name</span>: <span class="nc">Name</span><span class="p">,</span><span class="w"> </span><span class="n">f_name</span>: <span class="nc">FirstName</span><span class="p">,</span><span class="w"> </span><span class="n">n_name</span>: <span class="nc">Nickname</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Friend</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="cm">/* Some code */</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="p">}</span>
</code></pre></div>
<h2 id="generics">Generics</h2>
<p>Generics rely on the use of brackets so that the parser can <em>easily</em> differentiate between
a generic use/declaration (<code>A&lt;T&gt;</code>) versus a variable comparison (<code>A &lt; T</code>) without any sort
of lookahead. Thus, the following in C++</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
</code></pre></div>
<p>would become in jinko</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">map</span>: <span class="nb">Vec</span><span class="p">[</span><span class="n">Map</span><span class="p">[</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">int</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">..</span><span class="p">.;</span><span class="w"> </span>
</code></pre></div>
<p>Likewise, the following Rust code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">fn</span> <span class="nf">takes_result</span><span class="p">(</span><span class="n">r</span>: <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">SomeErrorType</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>becomes</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">func</span><span class="w"> </span><span class="n">takes_result</span><span class="p">(</span><span class="n">r</span>: <span class="nb">Result</span><span class="p">[</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">SomeErrorType</span><span class="p">])</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>This syntax is similar to scala's generics, which are quite nice to use.</p>
<p>Generics, just like function parameters, should be able to take a default value, which
could be specified by name.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">type</span> <span class="nc">BaseError</span><span class="p">(</span><span class="n">inner</span>: <span class="nc">string</span><span class="p">);</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">type</span> <span class="nb">Ok</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="n">T</span><span class="p">);</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="k">type</span> <span class="nb">Err</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="n">T</span><span class="p">);</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="k">type</span> <span class="nb">Result</span><span class="p">[</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">void</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseError</span><span class="p">](</span><span class="nb">Ok</span><span class="p">[</span><span class="n">T</span><span class="p">],</span><span class="w"> </span><span class="nb">Err</span><span class="p">[</span><span class="n">E</span><span class="p">]);</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1">// We can avoid typing `Result` by using type promotion but w/e, this is for</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="c1">// the example&#39;s sake</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="n">ok_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">int</span><span class="p">](</span><span class="nb">Ok</span><span class="p">(</span><span class="mi">15</span><span class="p">));</span><span class="w"> </span><span class="c1">// E defaults to BaseError</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="n">ok_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">](</span><span class="nb">Ok</span><span class="p">(</span><span class="mi">15</span><span class="p">));</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="n">ok_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">](</span><span class="nb">Err</span><span class="p">(</span><span class="s">&quot;oops&quot;</span><span class="p">));</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="n">ok_4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">int</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">](</span><span class="nb">Err</span><span class="p">(</span><span class="s">&quot;oops&quot;</span><span class="p">));</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="n">ok_5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">int</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">string</span><span class="p">](</span><span class="nb">Err</span><span class="p">(</span><span class="s">&quot;oops&quot;</span><span class="p">));</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="n">ok_6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Result</span><span class="p">[</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bool</span><span class="p">](</span><span class="nb">Err</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span><span class="w"> </span><span class="c1">// T defaults to void</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
    
  </body>
</html>